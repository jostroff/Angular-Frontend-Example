

<table style = "width: 100%" cellspacing="2pt" cellpadding="2pt">
    <thead class="sectionHeader">
    </thead>
  
  <tbody class="button_region">
    <tr>
      <td>
        &nbsp;{{ plan.planInfo.planID }}
          <span style = "text-transform: uppercase">{{ plan.unmappedAttributes[0].value }}) </span>
      </td>
      <td>
        &nbsp;{{ plan.planInfo.planID }}
          <span style = "text-transform: uppercase">{{ plan.unmappedAttributes[0].value }}) </span>
      </td>
      
      
    </tr>
    <tr>
      <td colspan = "2">
        <!-- {{ plan.planInfo.productFamily }} -->
        Created By
      </td>
      <!-- <td>{{ plan.planInfo.tierType }}</td> -->
      </tr>
  </tbody>
  </table>

  <br/>

<!--class="table table-bordered table-striped"-->
<table style = "width: 100%" cellspacing="2pt" cellpadding="2pt">
  <thead>
    <td colspan = "4" class = "button_region">
      <span style>
        <button (click) = "expand()" class = "expand_collapse_button">Expand All</button>
        &nbsp;
        <button (click) = "collapse()" class = "expand_collapse_button">Collapse All</button>
      </span>
    </td>
  </thead>

  <thead class="sectionHeader">
    <tr>
      <td colspan = "4" (click)="colChange('planInfo')">
          <span [ngClass] = "{'down_arrow': column['planInfo'], 'right_arrow': !column['planInfo']}">
            &nbsp; &nbsp; {{ plan.planInfo.planID }} - (Version: {{ plan.planInfo.planVersion }} - 
              <span style = "text-transform: uppercase">{{ plan.unmappedAttributes[0].value }}) </span>
              Effective {{ plan.planInfo.planEffectiveDate }} - {{ plan.planInfo.planRenewalDate }}
          </span>
          <span style = "font-size: 8pt">.....report generated by 
          BuildOHISummaryReport ver. 2.0</span>
      </td>
    </tr>
  </thead>


  <tbody *ngIf = "column['planInfo']">
    <!-- <tr *ngFor="let plan of plans"> -->
    <tr>
      <td class = "rowTitles">
        <!-- {{ plan.planInfo.productFamily }} -->
        Created By
      </td>
      <!-- <td>{{ plan.planInfo.tierType }}</td> -->
      <td class = "rowData">
        ???
      </td>

      <td class = "rowTitles">
        Last Modified
      </td>
      <td class = "rowData">
        <p *ngFor="let responsibility of plan.planInfo.priorApprovalResponsibilities">
          Party: {{ responsibility.responsibleParty }}<br />
          Type: {{ responsibility.networkType }}
        </p>
      </td>
    </tr>
    <!-- <tr *ngFor="let plan of plans"> -->
    <tr>
      <td class = "rowTitles">
        Year Type
      </td>
      <td class = "rowData">
        {{ plan.planInfo.yearType }}
      </td>
      <td class = "rowTitles">
        Claim Adjudication Begin Date
      </td>
      <td class = "rowData">
        {{ plan.planInfo.claimAdjudicationBeginDate }}
      </td>
    </tr>
    <tr>
      <td class = "rowTitles">
        Funding
      </td>
      <td class = "rowData">
        {{ plan.planInfo.fundingArrangement }}
      </td>

      <td class = "rowTitles">
        
      </td>
      <td class = "rowData">
        
      </td>
    </tr>
    <tr>
      <td class = "rowTitles">
        Rating State
      </td>
      <td class = "rowData">
        {{ plan.planInfo.ratingState }}
      </td>
      <td class = "rowTitles">
        Product Line
      </td>
      <td class = "rowData">
        {{ plan.planInfo.productLine }}
      </td>
    </tr>
    <tr>
      <td class = "rowTitles">
        Product Family
      </td>
      <td class = "rowData">
        {{ plan.planInfo.productFamily }}
      </td>

      <td class = "rowTitles">
        Legal Entity
      </td>
      <td class = "rowData">
        {{ plan.planInfo.legalEntity }}
      </td>
    </tr>
    <tr>
      <td class = "rowTitles">
        Market Segment
      </td>
      <td class = "rowData">
        {{ plan.planInfo.marketSegment }}
      </td>

      <td class = "rowTitles">
        Marketing Name
      </td>
      <td class = "rowData">
        n/a
      </td>
    </tr>
    <tr>
      <td class = "rowTitles">
        Costshare Order
      </td>

      <td class = "rowData">
        ???
      </td>

      <td class = "rowTitles">
        Shared Accumulator Codes
      </td>
      <td class = "rowData">
        
      </td>
    </tr>
    <tr>
      <td class = "rowTitles"> <!--NOTE: Need NgIf* here.-->
        Prior Approval Resp. {{ plan.planInfo.priorApprovalResponsibilities[0].networkType }}
      </td>
      <td class = "rowData">
        {{ plan.planInfo.priorApprovalResponsibilities[0].responsibleParty }}
      </td>

      <td class = "rowTitles">
        Prior Approval Resp. {{ plan.planInfo.priorApprovalResponsibilities[1].networkType }}
      </td>
      <td class = "rowData">
        {{ plan.planInfo.priorApprovalResponsibilities[1].responsibleParty }}
      </td>
    </tr>
    <tr>
      <td class = "rowTitles">
        MCC Compliant
      </td>
      <td class = "rowData"> <!--NOTE: Fix this attribute name?-->
        {{ plan.planInfo.mccComplianceCode }}
      </td>
      <td class = "rowTitles">
        MCC Compliance
      </td>
      <td class = "rowData">
        {{ plan.planInfo.mccCompliance }}
      </td>
    </tr>
    <tr>
      <td class = "rowTitles">
        MCC Non-Compliance Reason
      </td>
      <td class = "rowData">
        ???
      </td>

      <td class = "rowTitles">
        
      </td>
      <td class = "rowData">
        
      </td>
    </tr>
  </tbody>


  <thead class="sectionHeader" (click)="colChange('copay')">
    <tr>
      <th colspan = "4"  [ngClass] = "{'down_arrow': column['copay'], 'right_arrow': !column['copay']}">
        &nbsp; &nbsp; Copay
      </th>
    </tr>
  </thead>
  <tbody  *ngIf = "column['copay']">
    <!-- <tr *ngFor="let plan of plans"> -->
    <tr>
      <!-- <ng-container *ngFor="let benefit of plan.benefits">
        <ng-container *ngIf = "benefit.locationCode">
          <td class = "rowTitles">
            Office Visit Copayment: Loc {{ benefit.locationCode }}
          </td>
          <td class = "rowData">
            {{ benefit.costshareRegimeINCode }}
          </td>
        </ng-container>
      </ng-container> -->
      
      <ng-container *ngFor="let officeVisit of officeVisits[0]; let index = index">
        <td class = "rowTitles">
          Office Visit Copayment: Loc {{ officeVisits[0][index] }}
        </td>
        <td class = "rowData">
          {{ officeVisits[1][index] }}
        </td>
      </ng-container>
    </tr>
    <!-- <tr *ngFor="let plan of plans"> -->
    <tr *ngFor = "let copayTier of copayTiers; let index = index">
      <td class = "rowTitles">
        <ng-container *ngIf = "index != 4">
          Copay Tier {{ index + 1 }}
        </ng-container>
        <ng-container *ngIf = "index == 4">
          Copay (OON)
        </ng-container>
      </td>
      <td class = "rowData"> <!-- Note: 2/11/21... Flatten this. -->
        <!-- <ng-container *ngFor="let benefit of plan.benefits">
          <ng-container *ngFor = "let copay of benefit.benefitCostsharing.copays">
            {{ copay.amount }}
          </ng-container>
        </ng-container> -->

        <!-- {{ copayTiers }} has toString() with extraneous commas.-->
        <ng-container *ngIf = "copayTiers[index]">
          <ng-container *ngFor = "let c of copayTiers[index]">
            {{ c }} <br/>
          </ng-container>
        </ng-container>
        <ng-container *ngIf = "copayTiers[index] == ''">
          n/a
        </ng-container>
      </td>
      <td class = "rowTitles">
        
      </td>
      <td class = "rowData">
        
      </td>
    </tr>
  </tbody>
  
  <thead class="sectionHeader" (click)="colChange('emergency_room')">
    <tr>
      <th colspan = "4" [ngClass] = "{'down_arrow': column['emergency_room'], 'right_arrow': !column['emergency_room']}">
        &nbsp; &nbsp; Emergency Room (click me)
      </th>
    </tr>
  </thead>
  <tbody *ngIf = "column['emergency_room']">
    <!-- <tr *ngFor="let plan of plans"> -->
    <tr>
      <td class = "rowTitles">
        {{ plan.planInfo.productFamily }}
      </td>
      <!-- <td>{{ plan.planInfo.tierType }}</td> -->
      <td class = "rowData">
        {{ plan.planInfo.productFamily }}
      </td>
      <td class = "rowTitles">
        {{ plan.planInfo.productFamily }}
      </td>
      <!-- <td>{{ plan.planInfo.tierType }}</td> -->
      <td class = "rowData">
        {{ plan.planInfo.productFamily }}
      </td>
    </tr>
    
  </tbody>
  <thead class="sectionHeader" (click)="colChange('inpatient_sdc')">
    <tr>
      <th colspan = "4" [ngClass] = "{'down_arrow': column['inpatient_sdc'], 'right_arrow': !column['inpatient_sdc']}">
        &nbsp; &nbsp; Inpatient/Surgical Day Care
      </th>
    </tr>
  </thead>
  <tbody *ngIf = "column['inpatient_sdc']">
    <tr>
      <td class = "unavailable" colspan = 4>
        n/a
      </td>
    </tr>
  </tbody>

  <thead class="sectionHeader" (click)="colChange('nontiered_DD')">
    <tr>
      <th colspan = "4" [ngClass] = "{'down_arrow': column['nontiered_DD'], 'right_arrow': !column['nontiered_DD']}">
        &nbsp; &nbsp; Non-Tiered Deductibles
      </th>
    </tr>
  </thead>
  <tbody *ngIf = "column['nontiered_DD']">
    <tr *ngFor = "let index of createRange(3);">
      <td class = "rowTitles">
        {{ nonTieredDDNames[2 * index] }}
      </td>
      <td class = "rowData">
        {{ nonTieredDDMappings[2 * index] }}
      </td>
      <td class = "rowTitles">
        {{ nonTieredDDNames[2 * index + 1] }}
      </td>
      <td class = "rowData">
        {{ nonTieredDDMappings[2 * index + 1] }}
      </td>
    </tr>
  </tbody>

  <thead class="sectionHeader" (click)="colChange('tiered_DD')">
    <tr>
      <th colspan = "4" [ngClass] = "{'down_arrow': column['tiered_DD'], 'right_arrow': !column['tiered_DD']}">
        &nbsp; &nbsp; Tiered Deductibles
      </th>
    </tr>
  </thead>
  <tbody *ngIf = "column['tiered_DD']">
    <tr>
      <td class = "unavailable" colspan = 4>
        n/a
      </td>
    </tr>
  </tbody>
  <thead class="sectionHeader" (click)="colChange('oopm')">
    <tr>
      <th colspan = "4" [ngClass] = "{'down_arrow': column['oopm'], 'right_arrow': !column['oopm']}">
        &nbsp; &nbsp; Out-Of-Pocket Maximums
      </th>
    </tr>
  </thead>
  <tbody *ngIf = "column['oopm']">
    <tr>
      <td class = "rowTitles">
        In-Network OOPM Per Member
      </td>
      <td class = "rowData">
        {{ oopMaxDisplays[0] }}
      </td>
      <td class = "rowTitles">
        Out-of-Network OOPM Per Member
      </td>
      <td class = "rowData">
        {{ oopMaxDisplays[1] }}
      </td>
    </tr>
    <tr>
      <td class = "rowTitles">
        In-Network OOPM Per Family
      </td>
      <td class = "rowData">
        {{ oopMaxDisplays[2] }}
      </td>
      <td class = "rowTitles">
        Out-of-Network OOPM Per Family
      </td>
      <td class = "rowData">
        {{ oopMaxDisplays[3] }}
      </td>
    </tr>
  </tbody>
  <thead class="sectionHeader" (click)="colChange('coinsurance')">
    <tr>
      <th colspan = "4" [ngClass] = "{'down_arrow': column['coinsurance'], 'right_arrow': !column['coinsurance']}">
        &nbsp; &nbsp; Coinsurance
      </th>
    </tr>
  </thead>
  <tbody *ngIf = "column['coinsurance']">
    <tr>
      <td class = "rowTitles">
        In-Network Coinsurance
      </td>
      <td class = "rowData">
        <!-- <li *ngFor="let hero of heroes$ | async" >
          <a routerLink="/detail/{{hero.id}}">
              {{hero.name}}
          </a>
      </li> -->
        <ng-container *ngFor = "let c of coinsuranceInNetworkDisplays">
          {{ c }} <br/>
        </ng-container>
      </td>
      <td class = "rowTitles">
        Out-of-Network Coinsurance
      </td>
      <td class = "rowData">
        <ng-container *ngFor = "let c of coinsuranceOutNetworkDisplays">
          {{ c }} <br/>
        </ng-container>
      </td>
    </tr>
  </tbody>

  <thead class="sectionHeader" (click)="colChange('configNotes')">
    <tr>
      <th colspan = "4" [ngClass] = "{'down_arrow': column['configNotes'], 'right_arrow': !column['configNotes']}">
        &nbsp; &nbsp; Configuration Notes
      </th>
    </tr>
  </thead>
  <tbody *ngIf = "column['configNotes']">
    <tr *ngFor = "let cn of configNotes">
      <td class = "rowTitles">
        ???
      </td>
      <td class = "rowData" colspan="3">
        {{ cn }}
      </td>
    </tr>
  </tbody>
  <thead class="sectionHeader" (click)="colChange('exclusions')">
    <tr>
      <th colspan = "4" [ngClass] = "{'down_arrow': column['exclusions'], 'right_arrow': !column['exclusions']}">
        &nbsp; &nbsp; Exclusions
      </th>
    </tr>
  </thead>
  <tbody *ngIf = "column['exclusions']">
    <tr *ngFor = "let exclusion of exclusions">
      <td class = "unavailable" colspan="4">
        {{ exclusion }}
      </td>
    </tr>
  </tbody>
  <thead class="sectionHeader" (click)="colChange('limits')">
    <tr>
      <th colspan = "4" [ngClass] = "{'down_arrow': column['limits'], 'right_arrow': !column['limits']}">
        &nbsp; &nbsp; Limits
      </th>
    </tr>
  </thead>
  <tbody *ngIf = "column['limits']">
    <!-- <tr *ngFor="let plan of plans"> -->
    <tr *ngFor = "let limitDisplay of limitsDisplayLeft; let index = index">
    <!-- *ngFor = "let limitDisplay of limitDisplayLeft; let index = index" -->
      <td class = "rowTitles" colspan="2">
        {{ limitsDisplayLeft[index] }}
      </td>
      <!-- <td>{{ plan.planInfo.tierType }}</td> -->
      <td class = "rowData" colspan="2">
        {{ limitsDisplayRight[index] }}
      </td>
    </tr>
  </tbody>
  <thead class="sectionHeader" (click)="colChange('mandates')">
    <tr>
      <th colspan = "4" [ngClass] = "{'down_arrow': column['mandates'], 'right_arrow': !column['mandates']}">
        &nbsp; &nbsp; Mandates
      </th>
    </tr>
  </thead>
  <tbody *ngIf = "column['mandates']">
    <!-- <tr *ngFor="let plan of plans"> -->
    <tr *ngFor = "let stateMandate of stateMandates; let index = index">
    <!-- *ngFor = "let limitDisplay of limitDisplayLeft; let index = index" -->
      <td class = "rowTitles" colspan="2">
        State Mandate: {{ stateMandates[index] }} ???
      </td>
      <!-- <td>{{ plan.planInfo.tierType }}</td> -->
      <td class = "rowData" colspan="2">
        {{ mandateBenefits[index] }}
      </td>
    </tr>
  </tbody>
  <thead class="sectionHeader" (click)="colChange('indicators')">
    <tr>
      <th colspan = "4" [ngClass] = "{'down_arrow': column['indicators'], 'right_arrow': !column['indicators']}">
        &nbsp; &nbsp; Indicators
      </th>
    </tr>
  </thead>
  <tbody *ngIf = "column['indicators']">
    <!-- <tr *ngFor="let plan of plans"> -->
    <tr *ngFor = "let indicator of indicators">
    <!-- *ngFor = "let limitDisplay of limitDisplayLeft; let index = index" -->
      <td class = "rowTitles" colspan="2">
        {{ indicator.name }}
      </td>
      <!-- <td>{{ plan.planInfo.tierType }}</td> -->
      <td class = "rowData" colspan="2">
        {{ indicator.value }}
      </td>
    </tr>
  </tbody>
  <thead class="sectionHeader" (click)="colChange('networks')">
    <tr>
      <th colspan = "4" [ngClass] = "{'down_arrow': column['networks'], 'right_arrow': !column['networks']}">
        &nbsp; &nbsp; Networks
      </th>
    </tr>
  </thead>
  <ng-container  *ngIf = "column['networks']">
    <thead class = "networkHead" colspan = "4">
      <tr>
        <th colspan = "4">----Plan Level Network</th>
      </tr>
    </thead>
    <tbody *ngFor = "let network of planLevelNetworks">
      <tr>
        <td class = "networkHead" colspan = "4">
          --------{{ network.networkCode }}-{{ network.networkName }}
        </td>
      </tr>
      <tr>
        <td class = "rowTitles">
          NDM Network Code
        </td>
        <td class = "rowData">
          {{ network.networkCode }}
        </td>
        <td class = "rowTitles">
          Network
        </td>
        <td class = "rowData">
          {{ network.networkName }}
        </td>
      </tr>
      <tr>
        <td class = "rowTitles">
          Network Type
        </td>
        <td class = "rowData">
          {{ network.networkType }}
        </td>
        <td class = "rowTitles">
          Network Level
        </td>
        <td class = "rowData">
          1 ???
        </td>
      </tr>
    </tbody>
    <thead class = "networkHead" colspan = "4">
      <tr>
        <th colspan = "4">----Benefit Level Networks</th>
      </tr>
    </thead>
    <tbody *ngFor = "let network of benefitLevelNetworks">
      <tr>
        <td class = "networkHead" colspan = "4">
          --------{{ network.networkCode }}-{{ network.networkName }}
        </td>
      </tr>
      <tr>
        <td class = "rowTitles">
          NDM Network Code
        </td>
        <td class = "rowData">
          {{ network.networkCode }}
        </td>
        <td class = "rowTitles">
          Network
        </td>
        <td class = "rowData">
          {{ network.networkName }}
        </td>
      </tr>
      <tr>
        <td class = "rowTitles">
          Network Type
        </td>
        <td class = "rowData">
          {{ network.networkType }}
        </td>
        <td class = "rowTitles">
          Network Level
        </td>
        <td class = "rowData">
          1 ???
        </td>
      </tr>
    </tbody>
  </ng-container>
</table>
<div class = "footer header-and-footer">
  <table class = "footer-table">
    <tbody>
      <tr>
        <td class = "footer-title-left" style = "border: 0px">
          Product Data Management (PDM)
        </td>
        <td class = "footer-title-right" style = "border: 0px">
          Copyright (C) 2021
        </td>
      </tr>
    </tbody>
  </table>
</div>